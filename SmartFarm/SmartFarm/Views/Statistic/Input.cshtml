@using SmartFarm.Models;

@model InputModel;
@{
    ViewData["Title"] = "Input";
}
@section CustomCss{
    <link rel="stylesheet" type="text/css" href="/css/chart.css"/>
}

<div class="section" style="background-color:#EBFCF2;padding-top: 2rem;">
        <div class="container-xxl py-5">
            <div class="container py-5 px-lg-5">
                <div class="row g-4 portfolio-container mb-4">
                    <h1>Thiết bị input</h1>
                    <div class="col-lg-3 col-md-6 portfolio-item first wow fadeInUp" data-wow-delay="0.1s">
                        <div class="rounded overflow-hidden">
                            <div class="position-relative overflow-hidden">
                                <img class="img-fluid w-100" src="@Model.image" alt="">
                                <div class="portfolio-overlay">
                                    <a class="btn btn-square btn-outline-light mx-1" href="img/portfolio-1.jpg" data-lightbox="portfolio"><i class="fa fa-eye"></i></a>
                                    <a class="btn btn-square btn-outline-light mx-1" href=""><i class="fa fa-link"></i></a>
                                </div>
                            </div>
                            <div class="bg-light p-4 text-center fs-3">
                                <p class="text-primary fw-medium mb-2">@Model.name</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-9 col-md-6 portfolio-item second wow fadeInUp" data-wow-delay="0.3s">
                        <div class="rounded overflow-hidden">
                            <div class="position-relative overflow-hidden">
                                <img class="img-fluid w-100" src="/images/ouputdesc.png" alt="">
                                <div class="portfolio-overlay">
                                    <a class="btn btn-square btn-outline-light mx-1" href="@Model.image" data-lightbox="portfolio"><i class="fa fa-eye"></i></a>
                                    <a class="btn btn-square btn-outline-light mx-1" href=""><i class="fa fa-link"></i></a>
                                </div>
                            </div>
                            <div class="bg-light p-4 fs-3" >
                                <p class="text-primary fw-medium mb-2">Chọn loại hình xem thống kê</p>
                                <form class="row">
                                    <div class="col-9">
                                        <select class="form-select form-select-lg mb-3" style="background-color: #FFDBDB;">
                                            <option>chọn loại hình xem thống kê --</option>
                                            <option value="1">Xem thống kê dạng bảng</option>
                                            <option value="2">Xem thống kê dạng biểu đồ</option>
                                        </select>

                                    </div>
                                    <div class="col-3">
                                        <input type="button" value="Tra cứu" class="form-control fs-3" style="background-color: #FF8080;"/>
                                        <input id="feed" hidden="true" value="@Model.feedName" name="@Model.name" kind="@Model.loaiThietBi"/>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
                <div><h1 style="font-weight:700;font-size:35px">Biểu đồ</h1></div>
                <div class="section-content" id="type_chart">
                    <div class="chart_">
                        <select id="option_chart" >
                            <option value="1">Biểu đồ biểu diễn sự biến thiên thông số của thiết bị</option>
                            <option value="2">Biểu đồ so sánh số lần vượt ngưỡng</option>
                        </select>
                        <label class="from">Từ:
                        <input type="date"
                            min="2022-03-01" max="" class="time _from">
                        </label>
                        <label class="to">Đến:
                        <input type="date"
                            min="2022-03-01" max="" class="time _to">
                        </label>
                        <button class="button button-primary btn-on-bline" type="submit">Xác nhận</button>
                    </div>
                    <div style="width: 100%">
                    <canvas id="myChart"></canvas>
                    </div>
                    <div style="width: 100%">
                    <canvas id="myChart2"></canvas>
                    </div>
                </div>
                 <div class="row g-4 portfolio-container section-content" id="table">
                    <table class="table fs-3">
                      <thead>
                        <tr>
                          <th scope="col">#</th>
                         <th scope="col">Id device</th>
                          <th scope="col">value</th>
                          <th scope="col">Location</th>
                          <th scope="col">Time</th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr>
                          <th scope="row">1</th>
                          <td>1</td>
                          <td>on/off</td>
                          <td>H11</td>
                          <td>2022-03-22-22:00</td>
                        </tr>
                        <tr>
                          <th scope="row">3</th>
                          <td>1</td>
                          <td>on/off</td>
                          <td>H11</td>
                          <td>2022-03-22-22:00</td>
                        </tr>
                        <tr>
                          <th scope="row">3</th>
                          <td>1</td>
                          <td>on/off</td>
                          <td>H11</td>
                          <td>2022-03-22-22:00</td>
                        </tr>
                      </tbody>
                    </table>
                </div>
            </div>
        </div>
        <!-- Service End -->
    <!-- /container -->
</div>
@section Scripts{
    <script type="text/javascript">
    var d=new Date();
    var date=d.getDate();
    var year=d.getFullYear();
    var month=d.getMonth()+1;
    if (month<10) month='0'+month;
    var value=year+'-'+month+'-'+date;
    console.log(document.querySelector('.time._to').value);
    document.querySelector('.time._to').max=value;
    document.querySelector('.time._to').value=value;
    document.querySelector('.time._from').max=value;
    document.querySelector('.time._from').value=value;
    document.querySelector('.time._to').onchange=function(e){
        console.log("time to",e.target.value)
        document.querySelector('.time._from').max=e.target.value;
    }
    document.querySelector('.time._from').onchange=function(e){
        document.querySelector('.time._to').min=e.target.value;
    }
    document.querySelector('#type_chart').style.display = 'none';
    document.querySelector('input[type="button"]').onclick=function(e) {
        if (document.querySelector('select').value=="2") 
        {  
            document.querySelector('#type_chart').style.display = 'block';
            document.querySelector('#table').style.display = 'none';
        }
        else 
        {
            document.querySelector('#type_chart').style.display = 'none';
            document.querySelector('#table').style.display = 'block';
        }
    };
    document.getElementById("myChart2").style.display="none";
    document.querySelector('#option_chart').addEventListener("change", (e)=>{
            if(e.target.value==1) 
            {
                document.getElementById("myChart2").style.display="none";
                document.getElementById("myChart").style.display="block";
            }
            else 
            {
                document.getElementById("myChart2").style.display="block";
                document.getElementById("myChart").style.display="none";
            }

        });
    </script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/chartjs-plugin-datalabels/2.0.0/chartjs-plugin-datalabels.min.js"
      integrity="sha512-R/QOHLpV1Ggq22vfDAWYOaMd5RopHrJNMxi8/lJu8Oihwi4Ho4BRFeiMiCefn9rasajKjnx9/fTQ/xkWnkDACg=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>
    <script src="/js/linescript.js"></script>
    <script src="/js/barscript.js"></script>
}


